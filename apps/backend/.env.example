# =============================================================================
# DCULUS FORMS BACKEND - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure with your actual values
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=4000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# MongoDB connection string (required)
# Format: mongodb://username:password@host:port/database?authSource=admin
#
# Examples:
#   Local:     mongodb://admin:password@localhost:27017/dculus_forms?authSource=admin
#   MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/dculus_forms
#   Cloud:     mongodb://admin:password@mongodb.example.com:27017/dculus_forms
DATABASE_URL="mongodb://admin:password@localhost:27017/dculus_forms?authSource=admin"

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# Better Auth Secret (required)
# Generate a secure secret: openssl rand -hex 32
# Must be at least 32 characters
BETTER_AUTH_SECRET="CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-MIN-32-CHARS"

# Better Auth URL (required)
# The public URL where your backend API is accessible
# Examples: https://api.yourdomain.com, http://localhost:4000
BETTER_AUTH_URL="http://localhost:4000"

# -----------------------------------------------------------------------------
# Admin User Setup (optional, for initial super admin creation)
# -----------------------------------------------------------------------------
# These are used by the admin:setup script to create the first admin user
# You can remove these after initial setup or keep them for automated deployments
ADMIN_EMAIL="admin@dculus.com"
ADMIN_PASSWORD="change-this-password"
ADMIN_NAME="Super Admin"

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins (required)
# Include all frontend app URLs that will call this API
#
# Examples:
#   Development: http://localhost:3000,http://localhost:5173
#   Production:  https://app.yourdomain.com,https://admin.yourdomain.com
CORS_ORIGINS="http://localhost:3000,http://localhost:3002,http://localhost:5173"

# -----------------------------------------------------------------------------
# S3-Compatible Storage Configuration (required for file uploads)
# -----------------------------------------------------------------------------
# Works with AWS S3, MinIO, DigitalOcean Spaces, Backblaze B2, etc.
#
# For AWS S3:
#   S3_ENDPOINT="https://s3.amazonaws.com" or "https://s3.{region}.amazonaws.com"
#   S3_REGION="us-east-1"
#
# For MinIO (self-hosted):
#   S3_ENDPOINT="https://minio.yourdomain.com"
#   S3_REGION="us-east-1"
#
# For DigitalOcean Spaces:
#   S3_ENDPOINT="https://{region}.digitaloceanspaces.com"
#   S3_REGION="nyc3"

S3_ACCESS_KEY="your-s3-access-key"
S3_SECRET_KEY="your-s3-secret-key"
S3_ENDPOINT="https://s3.amazonaws.com"
S3_REGION="us-east-1"
S3_PRIVATE_BUCKET_NAME="dculus-forms-private"
S3_PUBLIC_BUCKET_NAME="dculus-forms-public"

# CDN URL for serving public files (required in production)
# Point this to CloudFront, Cloudflare, or any CDN layer in front of the public bucket
S3_CDN_URL="https://cdn.yourdomain.com"

# -----------------------------------------------------------------------------
# Optional: Email Configuration (for notifications, password resets, etc.)
# -----------------------------------------------------------------------------
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_SECURE="false"
# SMTP_USER="your-email@gmail.com"
# SMTP_PASS="your-app-password"
# SMTP_FROM="noreply@yourdomain.com"

# -----------------------------------------------------------------------------
# Optional: Application URLs (for email links, webhooks, redirects)
# -----------------------------------------------------------------------------
# FRONTEND_URL="https://app.yourdomain.com"
# ADMIN_URL="https://admin.yourdomain.com"
# VIEWER_URL="https://viewer.yourdomain.com"

# -----------------------------------------------------------------------------
# Optional: Logging Configuration
# -----------------------------------------------------------------------------
# LOG_LEVEL="info"          # Options: error, warn, info, debug
# LOG_FORMAT="json"         # Options: json, pretty

# -----------------------------------------------------------------------------
# Optional: Rate Limiting
# -----------------------------------------------------------------------------
# RATE_LIMIT_WINDOW_MS="900000"      # 15 minutes in milliseconds
# RATE_LIMIT_MAX_REQUESTS="100"      # Max requests per window

# -----------------------------------------------------------------------------
# Optional: File Upload Limits
# -----------------------------------------------------------------------------
# MAX_FILE_SIZE="10485760"           # 10MB in bytes
# MAX_FILES_PER_UPLOAD="5"

# -----------------------------------------------------------------------------
# Optional: Performance & Caching
# -----------------------------------------------------------------------------
# ENABLE_QUERY_CACHE="true"
# CACHE_TTL="3600"                   # Cache time-to-live in seconds

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
#
# 1. Security:
#    - Change ALL default values, especially BETTER_AUTH_SECRET
#    - Use strong, unique passwords for DATABASE_URL and ADMIN_PASSWORD
#    - Never expose this file publicly or commit it to version control
#
# 2. Database:
#    - Ensure MongoDB is accessible from your deployment server
#    - For cloud deployments, use MongoDB Atlas or a managed service
#    - Configure firewall rules to allow connections
#
# 3. S3 Storage:
#    - Create both private and public buckets
#    - Configure bucket policies and CORS settings
#    - For public bucket, enable public read access
#    - For private bucket, keep access restricted
#
# 4. CORS:
#    - Add ALL frontend URLs that will call this API
#    - Include both HTTP and HTTPS versions if needed
#    - Don't use wildcards in production
#
# 5. Health Checks:
#    - After deployment, test: curl http://your-api-url/health
#    - Should return: {"status": "ok"}
#
# =============================================================================
